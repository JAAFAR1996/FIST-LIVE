/**
 * سكربت تحسين منتجات HOUYI - الدفعة الثانية
 */

import { neon } from "@neondatabase/serverless";
import dotenv from "dotenv";

dotenv.config();

const DATABASE_URL = process.env.DATABASE_URL ||
  'postgresql://neondb_owner:npg_N7dEzt2pWjCi@ep-quiet-moon-a4h7tdze-pooler.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require';

const sql = neon(DATABASE_URL);

interface EnhancedProduct {
  id: string;
  description: string;
  specifications: Record<string, any>;
}

const enhancedProducts: EnhancedProduct[] = [
  // ==================== HOUYI FILTRATION ====================
  {
    id: "houyi-ceramic-ring",
    description: "حلقات سيراميك بيولوجية من HOUYI، المادة الأساسية للترشيح البيولوجي في أي نظام فلترة. مصنوعة من السيراميك المسامي عالي الجودة بتقنية الحرق العالي (1200 درجة). توفر مساحة سطح ضخمة لاستعمار البكتيريا النافعة التي تحول الأمونيا السامة إلى نترات أقل ضرراً. الهيكل المجوف يضمن تدفق مياه ممتاز عبر المادة. تدوم لسنوات دون الحاجة للاستبدال إلا عند التكسر.",
    specifications: {
      "العلامة التجارية": "HOUYI",
      "المادة": "سيراميك مسامي محروق",
      "درجة الحرق": "1200 درجة مئوية",
      "الشكل": "حلقات مجوفة",
      "الحجم": "15-20 ملم قطر",
      "الوزن": "500 جرام / 1 كجم",
      "مساحة السطح": "عالية جداً للبكتيريا",
      "العمر الافتراضي": "3-5 سنوات",
      "لماذا تختار هذا المنتج": [
        "مساحة سطح ضخمة للبكتيريا النافعة",
        "تحول الأمونيا السامة إلى نترات",
        "تدوم لسنوات دون استبدال",
        "لا تؤثر على كيمياء المياه",
        "مثالية لجميع أنواع الفلاتر",
        "أساس كل نظام ترشيح بيولوجي ناجح"
      ]
    }
  },
  {
    id: "houyi-activated-carbon",
    description: "كربون نشط عالي الجودة من HOUYI لتنقية المياه وإزالة الشوائب والروائح. مصنوع من قشور جوز الهند المعالجة بالبخار لتحقيق أقصى قدرة امتصاص. يزيل الكلور والكلورامين من مياه الصنبور، ويمتص المواد الكيميائية الضارة والأدوية المتبقية والأصباغ والروائح الكريهة. يجعل المياه صافية كريستالية. يُنصح باستبداله كل 4-6 أسابيع للحفاظ على فعاليته.",
    specifications: {
      "العلامة التجارية": "HOUYI",
      "المصدر": "قشور جوز الهند",
      "المعالجة": "بالبخار",
      "الحجم": "حبيبات 3-5 ملم",
      "الوزن": "500 جرام",
      "قدرة الامتصاص": "عالية جداً",
      "فترة الاستبدال": "4-6 أسابيع",
      "يزيل": "كلور، روائح، أصباغ، أدوية، مواد كيميائية",
      "لماذا تختار هذا المنتج": [
        "يزيل الكلور فوراً من مياه الصنبور",
        "يجعل المياه صافية كريستالية",
        "يزيل الروائح الكريهة",
        "يمتص الأدوية والمواد الكيميائية",
        "من قشور جوز الهند الطبيعية",
        "ضروري بعد العلاجات الدوائية"
      ]
    }
  },

  // ==================== HOUYI MAINTENANCE ====================
  {
    id: "houyi-small-wholesale-aquarium-special-nylon-fishing-net",
    description: "شبكة أسماك نايلون صغيرة من HOUYI، مثالية للأسماك الصغيرة والزريعة والروبيان. شبك ناعم جداً بفتحات دقيقة لا تسمح بمرور حتى أصغر الكائنات. مقبض بلاستيكي خفيف ومريح. إطار مرن لا يؤذي الأسماك. حجم مثالي للأحواض الصغيرة وأحواض النانو. سهلة التنظيف والتجفيف.",
    specifications: {
      "العلامة التجارية": "HOUYI",
      "القطر": "5-6 سم",
      "طول المقبض": "20 سم",
      "مادة الشبك": "نايلون ناعم جداً",
      "حجم الفتحات": "دقيق جداً",
      "مناسب لـ": "أسماك صغيرة، زريعة، روبيان",
      "لماذا تختار هذا المنتج": [
        "مثالية للأسماك الصغيرة والزريعة",
        "شبك ناعم لا يؤذي الأسماك الرقيقة",
        "فتحات دقيقة تمسك حتى الروبيان",
        "حجم مناسب لأحواض النانو",
        "خفيفة وسهلة الاستخدام",
        "سعر اقتصادي"
      ]
    }
  },
  {
    id: "houyi-aquarium-fish-tank-five-in-one-cleaning-tool-fish-net-scraper-algae-knife-aquatic-clip",
    description: "طقم تنظيف 5 في 1 احترافي من HOUYI يتضمن جميع أدوات الصيانة الأساسية: شبكة أسماك، مكشطة طحالب، سكين طحالب حاد، ملقط للنباتات، وفرشاة تنظيف. كل الأدوات مثبتة على مقبض واحد قابل للتمديد يصل إلى 50 سم. مثالي للأحواض متوسطة الحجم. يوفر عليك شراء كل أداة على حدة. تخزين سهل في مساحة صغيرة.",
    specifications: {
      "العلامة التجارية": "HOUYI",
      "عدد الأدوات": "5 أدوات",
      "المحتويات": "شبكة، مكشطة، سكين، ملقط، فرشاة",
      "طول المقبض": "حتى 50 سم (قابل للتمديد)",
      "المادة": "بلاستيك + معدن مغلف",
      "مناسب لـ": "أحواض حتى 60 سم عمق",
      "لماذا تختار هذا المنتج": [
        "5 أدوات في طقم واحد",
        "مقبض قابل للتمديد",
        "يوفر المال مقارنة بالشراء المنفصل",
        "تخزين سهل ومرتب",
        "جميع أدوات الصيانة الأساسية",
        "جودة احترافية بسعر اقتصادي"
      ]
    }
  },

  // ==================== HOUYI MONITORING ====================
  {
    id: "houyi-chubby-thermometer",
    description: "ترمومتر عائم من HOUYI بتصميم مبتكر وظريف. يطفو على سطح الماء ويعرض درجة الحرارة بوضوح. لا يحتاج تثبيت أو كوب شفط. سهل القراءة من أي زاوية. سائل ملون آمن غير سام. مثالي للأحواض التي تحتاج مراقبة سريعة للحرارة. تصميم مقاوم للانقلاب يبقيه في وضعية القراءة دائماً.",
    specifications: {
      "العلامة التجارية": "HOUYI",
      "النوع": "عائم",
      "النطاق": "0-40 درجة مئوية",
      "المادة": "زجاج + بلاستيك",
      "السائل": "كحول ملون آمن",
      "طريقة القراءة": "من السطح",
      "التثبيت": "لا يحتاج - يطفو",
      "لماذا تختار هذا المنتج": [
        "لا يحتاج أي تثبيت",
        "يطفو ويبقى مرئياً دائماً",
        "تصميم مقاوم للانقلاب",
        "سهل القراءة من أي زاوية",
        "آمن وغير سام",
        "مثالي للمراقبة السريعة"
      ]
    }
  },

  // ==================== HOUYI SUBSTRATE ====================
  {
    id: "houyi-dutch-sand",
    description: "تربة هولندية للنباتات المائية من HOUYI، تربة غنية بالمغذيات مصممة خصيصاً لأحواض النباتات. تحتوي على عناصر غذائية أساسية (نيتروجين، فوسفور، بوتاسيوم) تطلقها ببطء على مدى أشهر. حبيبات متوسطة الحجم مثالية لتجذير النباتات. لا تعكر الماء عند التركيب الصحيح. تخفض pH قليلاً مما يناسب معظم النباتات الاستوائية.",
    specifications: {
      "العلامة التجارية": "HOUYI",
      "النوع": "تربة مغذية للنباتات",
      "حجم الحبيبات": "2-4 ملم",
      "الوزن": "3 كجم / 5 كجم",
      "المغذيات": "NPK + عناصر صغرى",
      "إطلاق المغذيات": "بطيء (6-12 شهر)",
      "تأثير pH": "يخفض قليلاً",
      "لماذا تختار هذا المنتج": [
        "غنية بالمغذيات للنباتات",
        "إطلاق بطيء يدوم شهوراً",
        "حبيبات مثالية للتجذير",
        "لا تعكر الماء",
        "pH مناسب للنباتات الاستوائية",
        "أساس قوي لحوض نباتات ناجح"
      ]
    }
  },
  {
    id: "houyi-pumice-small-bag3-6mm",
    description: "حجر خفاف (بوميس) من HOUYI بمقاس 3-6 ملم، مادة ترشيح بيولوجية طبيعية خفيفة الوزن. مسامية عالية جداً توفر مساحة سطح ضخمة لنمو البكتيريا النافعة. يمكن استخدامه كطبقة تصريف تحت التربة في أحواض النباتات، أو كمادة ترشيح في الفلاتر. خفيف جداً ولا يثقل على هيكل الحوض. آمن ولا يؤثر على كيمياء المياه.",
    specifications: {
      "العلامة التجارية": "HOUYI",
      "المقاس": "3-6 ملم",
      "المادة": "حجر بركاني طبيعي",
      "المسامية": "عالية جداً",
      "الوزن": "خفيف جداً",
      "الاستخدامات": "ترشيح بيولوجي، طبقة تصريف",
      "تأثير pH": "محايد",
      "لماذا تختار هذا المنتج": [
        "مسامية استثنائية للبكتيريا",
        "خفيف جداً لا يثقل الحوض",
        "متعدد الاستخدامات",
        "لا يؤثر على كيمياء المياه",
        "مادة طبيعية 100%",
        "اقتصادي ويدوم طويلاً"
      ]
    }
  },
  {
    id: "houyi-white-sand",
    description: "رمل أبيض ناعم من HOUYI لإنشاء مظهر نظيف ومشرق في حوضك. رمل طبيعي معالج ومغسول بعناية لإزالة الأتربة والشوائب. حبيبات ناعمة ومستديرة آمنة على الأسماك القاعية والكوريدوراس. يعكس الضوء ويجعل الحوض أكثر إشراقاً. محايد لا يؤثر على pH أو قسوة المياه. مثالي للأكواسكيب النظيف والحديث.",
    specifications: {
      "العلامة التجارية": "HOUYI",
      "اللون": "أبيض طبيعي",
      "حجم الحبيبات": "0.5-1 ملم",
      "المعالجة": "مغسول ومعقم",
      "تأثير pH": "محايد",
      "تأثير GH": "محايد",
      "الوزن": "1 كجم / 5 كجم",
      "لماذا تختار هذا المنتج": [
        "مظهر نظيف ومشرق",
        "حبيبات ناعمة آمنة على الأسماك",
        "لا يؤثر على كيمياء المياه",
        "يعكس الضوء ويضيء الحوض",
        "مغسول جاهز للاستخدام",
        "مثالي للتصاميم الحديثة"
      ]
    }
  },
  {
    id: "houyi-south-american-sands-black-red",
    description: "رمل أمريكي جنوبي من HOUYI، رمل طبيعي ملون يحاكي بيئة أنهار أمريكا الجنوبية. متوفر بلونين: أسود دراماتيكي وأحمر دافئ. حبيبات متوسطة مثالية للنباتات والأسماك القاعية. يبرز ألوان الأسماك بشكل رائع خاصة على الخلفية الداكنة. آمن ومعالج لا يغير كيمياء المياه. مثالي لأحواض الأمازون والبيوتوب.",
    specifications: {
      "العلامة التجارية": "HOUYI",
      "الألوان": "أسود، أحمر",
      "حجم الحبيبات": "1-2 ملم",
      "المصدر": "طبيعي معالج",
      "تأثير pH": "محايد",
      "الوزن": "1 كجم / 5 كجم",
      "مناسب لـ": "أحواض الأمازون، البيوتوب",
      "لماذا تختار هذا المنتج": [
        "ألوان طبيعية جميلة",
        "يبرز ألوان الأسماك",
        "مثالي لبيئة الأمازون",
        "آمن على الأسماك القاعية",
        "لا يغير كيمياء المياه",
        "لونين للاختيار"
      ]
    }
  },
  {
    id: "houyi-stream-sand",
    description: "رمل جدول طبيعي من HOUYI، رمل متعدد الألوان يحاكي قاع الجداول الطبيعية. مزيج من حبيبات بألوان متنوعة (بيج، بني، رمادي) يعطي مظهراً طبيعياً وواقعياً. حبيبات مستديرة وناعمة آمنة على الأسماك. معالج ومغسول لإزالة الأتربة. مثالي لمن يريدون مظهراً طبيعياً غير مصطنع.",
    specifications: {
      "العلامة التجارية": "HOUYI",
      "اللون": "متعدد (بيج، بني، رمادي)",
      "حجم الحبيبات": "1-3 ملم",
      "المعالجة": "مغسول طبيعي",
      "تأثير pH": "محايد",
      "الوزن": "1 كجم / 5 كجم",
      "لماذا تختار هذا المنتج": [
        "مظهر طبيعي واقعي",
        "ألوان متعددة متناغمة",
        "يحاكي قاع الجداول الحقيقية",
        "آمن ومعالج",
        "مثالي للبيوتوب الطبيعي",
        "سهل التنظيف والصيانة"
      ]
    }
  },
  {
    id: "houyi-river-sand-1-2mm",
    description: "رمل نهري طبيعي من HOUYI بمقاس 1-2 ملم، الرمل الأكثر شيوعاً واستخداماً في أحواض الأسماك. حبيبات مستديرة وناعمة آمنة تماماً على الأسماك القاعية والكوريدوراس. لون بيج طبيعي محايد يناسب أي تصميم. حجم مثالي يسمح بتجذير النباتات مع سهولة التنظيف بالسيفون. معالج ومغسول جاهز للاستخدام.",
    specifications: {
      "العلامة التجارية": "HOUYI",
      "اللون": "بيج طبيعي",
      "حجم الحبيبات": "1-2 ملم",
      "المصدر": "رمل نهري طبيعي",
      "المعالجة": "مغسول ومعقم",
      "تأثير pH": "محايد",
      "الوزن": "1 كجم / 5 كجم",
      "لماذا تختار هذا المنتج": [
        "الخيار الكلاسيكي الأكثر شيوعاً",
        "آمن على جميع الأسماك",
        "حجم مثالي للنباتات والتنظيف",
        "لون محايد يناسب أي تصميم",
        "مغسول جاهز للاستخدام",
        "سعر اقتصادي"
      ]
    }
  },

  // ==================== HOUYI WATER TREATMENT ====================
  {
    id: "houyi-terminalia-leaves",
    description: "أوراق ترميناليا (كاتابا) طبيعية من HOUYI، العلاج الطبيعي الأشهر لصحة الأسماك. تطلق العفص والمواد المضادة للبكتيريا والفطريات بشكل طبيعي. تخفض pH قليلاً وتلون الماء بلون شاي خفيف يحاكي المياه السوداء الاستوائية. تعزز تكاثر البيتا والروبيان. تسرع شفاء الجروح والزعانف الممزقة. مجففة بعناية للحفاظ على الفعالية.",
    specifications: {
      "العلامة التجارية": "HOUYI",
      "النوع": "أوراق ترميناليا كاتابا مجففة",
      "الحجم": "15-20 سم لكل ورقة",
      "العدد": "10-20 ورقة للعبوة",
      "الفوائد": "مضاد بكتيري، مضاد فطري، يخفض pH",
      "تلوين الماء": "بني شاي خفيف",
      "مناسب لـ": "بيتا، روبيان، أسماك استوائية",
      "لماذا تختار هذا المنتج": [
        "علاج طبيعي 100% بدون كيماويات",
        "مضاد للبكتيريا والفطريات",
        "يسرع شفاء الجروح",
        "يعزز التكاثر والصحة العامة",
        "يحاكي البيئة الاستوائية الطبيعية",
        "ضروري لمربي البيتا والروبيان"
      ]
    }
  }
];

async function updateProducts() {
  console.log("=== بدء تحديث منتجات HOUYI - الدفعة 2 ===\n");

  let updated = 0;
  let failed = 0;

  for (const product of enhancedProducts) {
    try {
      await sql`
        UPDATE products
        SET
          description = ${product.description},
          specifications = ${JSON.stringify(product.specifications)}::jsonb,
          updated_at = NOW()
        WHERE id = ${product.id}
      `;
      console.log(`✓ تم تحديث: ${product.id}`);
      updated++;
    } catch (error: any) {
      console.error(`✗ فشل تحديث ${product.id}: ${error.message}`);
      failed++;
    }
  }

  console.log(`\n=== اكتمل التحديث ===`);
  console.log(`تم تحديث: ${updated} منتج`);
  console.log(`فشل: ${failed} منتج`);
}

updateProducts()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error("خطأ:", error);
    process.exit(1);
  });
